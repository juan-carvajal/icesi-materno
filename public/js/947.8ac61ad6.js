"use strict";(self["webpackChunkicesi_materno"]=self["webpackChunkicesi_materno"]||[]).push([[947],{76947:(e,l,a)=>{a.r(l),a.d(l,{default:()=>I});var o=a(83673),t=a(82942);const n={class:"self-center full-width no-outline",tabindex:"0"},r={class:"self-center full-width no-outline",tabindex:"0"};function c(e,l,a,c,s,d){const i=(0,o.up)("q-icon"),u=(0,o.up)("q-toolbar-title"),m=(0,o.up)("q-space"),p=(0,o.up)("q-btn"),g=(0,o.up)("q-toolbar"),v=(0,o.up)("q-input"),w=(0,o.up)("q-chip"),y=(0,o.up)("q-field"),b=(0,o.up)("case-card-vue"),f=(0,o.up)("q-card-section"),k=(0,o.up)("q-card-actions"),q=(0,o.up)("q-card"),C=(0,o.up)("q-inner-loading"),W=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(W,{class:"q-ma-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"text-primary q-px-none q-mb-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{name:"warning"}),e.alert?((0,o.wg)(),(0,o.j4)(u,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(`Alerta ${e.alert.id}`),1)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(m),(0,o.Wm)(p,{flat:"",round:"",icon:"list",to:"/alerts"})])),_:1}),e.alert?((0,o.wg)(),(0,o.j4)(q,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"row q-col-gutter-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{label:"Reportada en",readonly:"","model-value":e.translateDate(e.alert?.createdAt),class:"col-12 col-sm-6"},null,8,["model-value"]),(0,o.Wm)(v,{label:"Reportada por",readonly:"","model-value":e.alert?.createdBy?.displayName||e.alert?.createdBy?.email,class:"col-12 col-sm-6"},null,8,["model-value"]),(0,o.Wm)(v,{type:"textarea",readonly:"","model-value":e.alert.description,class:"col-12"},null,8,["model-value"]),(0,o.Wm)(v,{label:"Tipo de alerta",readonly:"","model-value":e.alert.deliveryMethod,class:"col-12 col-sm-6"},null,8,["model-value"]),(0,o.Wm)(v,{label:"Contacto de emergencia",readonly:"","model-value":e.alert.emergencyContact,class:"col-12 col-sm-6"},null,8,["model-value"]),(0,o.Wm)(v,{label:"Reconocida por",readonly:"","model-value":e.alert?.acknowledgedBy?.displayName||e.alert?.acknowledgedBy?.email,class:"col-12 col-sm-6"},null,8,["model-value"]),(0,o.Wm)(v,{label:"Reconocida en",readonly:"","model-value":e.translateDate(e.alert?.acknowledgedAt),class:"col-12 col-sm-6"},null,8,["model-value"]),(0,o.Wm)(y,{label:"Roles objetivo",class:"col-12","stack-label":""},{control:(0,o.w5)((()=>[(0,o._)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.alert.targetRoleIDs,((e,l)=>((0,o.wg)(),(0,o.j4)(w,{key:l},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e),1)])),_:2},1024)))),128))])])),_:1}),e.relatedCase?((0,o.wg)(),(0,o.j4)(y,{key:0,label:"Caso Relacionado",class:"col-12","stack-label":""},{control:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Wm)(b,{class:"q-mt-xs",caseProp:e.relatedCase},null,8,["caseProp"])])])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(k,{vertical:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{icon:"notifications_active",label:"Reconocer",color:"warning",onClick:e.acknowledgeAlert,disabled:!!e.alert.acknowledgedBy},null,8,["onClick","disabled"])])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(C,{showing:!e.alert||e.isLoading,label:"Cargando ...","label-class":"text-primary","label-style":"font-size: 1.1em"},null,8,["showing"])])),_:1})}var s=a(23470),d=a(9594),i=a(98511),u=a(48825),m=a(94215),p=a(86485);const g=(0,o.aZ)({props:{alertID:{required:!0,type:String}},components:{CaseCardVue:p.Z},setup(e){const{alertID:l}=(0,d.BK)(e),{alert:a}=(0,s.VY)(l),{notify:o}=(0,u.Z)(),t=(0,d.iH)(!1),n=(0,d.Fl)((()=>a.value?.relatedCaseID)),{docData:r}=(0,m.H)((0,d.iH)("cases"),n);function c(e){return e?e.toDate?e.toDate().toLocaleString():e.toLocaleString():null}function p(){const e=(0,i.v0)().currentUser;if(!e)return void o({type:"negative",message:"No hay usuario logueado."});t.value=!0;const{uid:a,email:n,displayName:r}=e;(0,s.Ob)(l.value,e?{uid:a,email:n,displayName:r}:void 0).catch((e=>{console.log(e),o({type:"negative",message:"Error reconociendo alerta."})})).finally((()=>{t.value=!1}))}return{alert:a,acknowledgeAlert:p,translateDate:c,isLoading:t,relatedCase:r}}});var v=a(74260),w=a(24379),y=a(39570),b=a(24554),f=a(13747),k=a(62025),q=a(2165),C=a(10151),W=a(25589),Z=a(64689),_=a(86115),Q=a(67030),h=a(99367),D=a(66941),R=a(7518),x=a.n(R);const B=(0,v.Z)(g,[["render",c]]),I=B;x()(g,"components",{QPage:w.Z,QToolbar:y.Z,QIcon:b.Z,QToolbarTitle:f.Z,QSpace:k.Z,QBtn:q.Z,QCard:C.Z,QCardSection:W.Z,QInput:Z.Z,QField:_.Z,QChip:Q.Z,QCardActions:h.Z,QInnerLoading:D.Z})}}]);