"use strict";(self["webpackChunkicesi_materno"]=self["webpackChunkicesi_materno"]||[]).push([[602],{55602:(e,l,a)=>{a.r(l),a.d(l,{default:()=>z});var o=a(83673),t=a(82942);const s=(0,o.Uk)(" Roles "),i={class:"row justify-center q-my-md"};function n(e,l,a,n,u,r){const d=(0,o.up)("q-icon"),m=(0,o.up)("q-toolbar-title"),c=(0,o.up)("q-toolbar"),p=(0,o.up)("q-linear-progress"),f=(0,o.up)("avatar-vue"),v=(0,o.up)("q-item-section"),w=(0,o.up)("q-item-label"),g=(0,o.up)("q-select"),q=(0,o.up)("q-item"),Z=(0,o.up)("q-list"),_=(0,o.up)("q-spinner-dots"),y=(0,o.up)("q-infinite-scroll"),L=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(L,{class:"q-ma-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"text-primary q-px-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"supervised_user_circle"}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[s])),_:1})])),_:1}),(0,o.Wm)(y,{onLoad:e.onLoad,offset:250},{loading:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(_,{color:"primary",size:"40px"})])])),default:(0,o.w5)((()=>[(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[e.userListLoading?((0,o.wg)(),(0,o.j4)(p,{key:0,query:"",color:"primary",class:"q-mt-sm"})):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.matchedUserList,(l=>((0,o.wg)(),(0,o.j4)(q,{key:l.uid},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{email:l.email},null,8,["email"])])),_:2},1024),(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(l.displayName??l.email),1)])),_:2},1024),(0,o.Wm)(w,{caption:"",lines:"1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(l.email),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(v,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{dense:"",clearable:"","stack-label":"",style:{"min-width":"350px"},options:e.roles,"option-label":"name","model-value":e.roles.find((e=>e.id===l.assignedRole?.roleID)),filled:"",label:"Rol actual","onUpdate:modelValue":a=>e.updateUserRole(l.uid,l.email??"",a?.id)},null,8,["options","model-value","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["onLoad"])])),_:1})}var u=a(38692),r=a(9594),d=a(32446),m=a(16423),c=a(17079),p=a(12942),f=a(48825);const v=(0,o.aZ)({components:{AvatarVue:d.Z},setup(){const e=(0,u.$C)(),l=(0,u.V1)(e,"admin-ListUsers"),a=(0,r.iH)(),o=(0,r.iH)(!1),t=(0,r.iH)(!1),s=(0,r.iH)([]),{roles:i}=(0,m.dc)(),{userRoles:n}=(0,m.s3)(),{notify:d}=(0,f.Z)();function v(e,i){t.value?i():(o.value=!0,l({pageToken:a.value}).then((e=>{s.value.push(...e.data.userRecords),a.value=e.data.pageToken,a.value||(t.value=!0)})).catch((e=>{console.log(e)})).finally((()=>{o.value=!1,i()})))}function w(e,l,a){(0,c.pl)((0,c.JU)(p.db,`userRoles/${e}`),{email:l,roleID:a??null},{merge:!0}).then((()=>{d({type:"positive",message:"Rol actualizado con Ã©xito"})})).catch((e=>{console.log(e),d({type:"negative",message:"Error actualizando rol."})}))}const g=(0,r.Fl)((()=>s.value.map((e=>({...e,assignedRole:n.value.find((l=>l.id===e.uid))})))));return{onLoad:v,matchedUserList:g,userListLoading:o,roles:i,updateUserRole:w}}});var w=a(74260),g=a(24379),q=a(39570),Z=a(24554),_=a(13747),y=a(92729),L=a(27011),b=a(51598),k=a(83414),W=a(52035),Q=a(2350),h=a(72448),U=a(34765),R=a(7518),I=a.n(R);const x=(0,w.Z)(v,[["render",n]]),z=x;I()(v,"components",{QPage:g.Z,QToolbar:q.Z,QIcon:Z.Z,QToolbarTitle:_.Z,QInfiniteScroll:y.Z,QList:L.Z,QLinearProgress:b.Z,QItem:k.Z,QItemSection:W.Z,QItemLabel:Q.Z,QSelect:h.Z,QSpinnerDots:U.Z})}}]);