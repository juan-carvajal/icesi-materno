"use strict";(self["webpackChunkicesi_materno"]=self["webpackChunkicesi_materno"]||[]).push([[672],{12672:(e,l,a)=>{a.r(l),a.d(l,{default:()=>x});var o=a(83673),s=a(12730);const t=(0,o.Uk)(" Registrar Usuarios "),r=(0,o._)("div",{class:"text-h6 ellipsis"},"Registrar Nuevo Usuario/Usuaria",-1),u=(0,o._)("p",{class:"q-mb-none text-body1"},"+57",-1);function n(e,l,a,n,m,i){const d=(0,o.up)("q-icon"),c=(0,o.up)("q-toolbar-title"),p=(0,o.up)("q-toolbar"),w=(0,o.up)("q-card-section"),f=(0,o.up)("q-input"),v=(0,o.up)("q-select"),U=(0,o.up)("q-btn"),b=(0,o.up)("q-form"),q=(0,o.up)("q-card"),V=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(V,{class:"q-ma-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"text-primary q-px-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"how_to_reg"}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[t])),_:1})])),_:1}),(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Wm)(b,{onSubmit:(0,s.iM)(e.confirm,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"row q-col-gutter-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"col-12 col-sm-6",type:"text",label:"Nombres",modelValue:e.newUserData.firstName,"onUpdate:modelValue":l[0]||(l[0]=l=>e.newUserData.firstName=l),rules:[e=>!!e||"Este campo es requerido"]},null,8,["modelValue","rules"]),(0,o.Wm)(f,{class:"col-12 col-sm-6",type:"text",label:"Apellidos",modelValue:e.newUserData.lastName,"onUpdate:modelValue":l[1]||(l[1]=l=>e.newUserData.lastName=l),rules:[e=>!!e||"Este campo es requerido"]},null,8,["modelValue","rules"]),(0,o.Wm)(v,{class:"col-12 col-sm-6",label:"Tipo de documento",options:e.documentTypes,modelValue:e.newUserData.documentType,"onUpdate:modelValue":l[2]||(l[2]=l=>e.newUserData.documentType=l),rules:[e=>!!e||"Este campo es requerido"]},null,8,["options","modelValue","rules"]),(0,o.Wm)(f,{class:"col-12 col-sm-6",type:"text",label:"Número de documento",mask:"###.###.###.###.###","reverse-fill-mask":"","unmasked-value":"",maxlength:"15",modelValue:e.newUserData.documentNumber,"onUpdate:modelValue":l[3]||(l[3]=l=>e.newUserData.documentNumber=l),rules:[e=>!!e||"Este campo es requerido"]},null,8,["modelValue","rules"]),(0,o.Wm)(f,{class:"col-12 col-sm-6",type:"text",label:"Correo electrónico",modelValue:e.newUserData.email,"onUpdate:modelValue":l[4]||(l[4]=l=>e.newUserData.email=l),rules:[e=>!!e||"Este campo es requerido"]},null,8,["modelValue","rules"]),(0,o.Wm)(f,{class:"col-12 col-sm-6",type:"text",mask:"phone",label:"Teléfono","unmasked-value":"",modelValue:e.newUserData.phone,"onUpdate:modelValue":l[5]||(l[5]=l=>e.newUserData.phone=l),rules:[e=>!!e||"Este campo es requerido",e=>10===e.length||"Por favor ingrese un número valido"]},{prepend:(0,o.w5)((()=>[u])),_:1},8,["modelValue","rules"]),(0,o.Wm)(v,{class:"col-12",modelValue:e.selectedRole,"onUpdate:modelValue":l[6]||(l[6]=l=>e.selectedRole=l),options:e.allowedRoles,"emit-value":"","map-options":"",label:"Rol",rules:[e=>!!e||"Este campo es requerido"]},null,8,["modelValue","options","rules"]),(0,o._)("div",null,[(0,o.Wm)(U,{color:"primary",type:"submit",label:"Crear"})])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})}var m=a(9594),i=a(30932),d=a(16423),c=a(86809),p=a(48825),w=a(73439);const f=(0,o.aZ)({setup(){const e=(0,m.iH)({}),l=Object.values(i.n),{roles:a}=(0,d.dc)(),s=(0,m.iH)(),t=(0,o.f3)("currentUser"),{authorization:r}=(0,c.Z)(t),{dialog:u,notify:n,loading:f}=(0,p.Z)(),v=(0,w.V1)((0,w.$C)(),"admin-RegisterNewAppUser");function U(){u({title:"Confirmación",message:"Por favor verifique con el usuario/usuaria que la información ingresada es verídica. Solo el/ella la podrá cambiar después.",cancel:"Cancelar",ok:"Crear Nuevo",persistent:!0}).onOk((()=>{f.show(),v({userData:e.value,roleID:s.value}).then((()=>{n({message:"Usuario creado con éxito.",type:"positive"}),e.value={},s.value=void 0})).catch((e=>{console.log(e),n({message:`Creación de usuario fallida: ${e.message}`,type:"negative"})})).finally((()=>{f.hide()}))}))}const b=(0,m.Fl)((()=>a.value.filter((e=>r.value?.permissions.includes("admin")||r.value?.allowedRoleIdsForCreation?.includes(e?.id??""))).map((e=>({label:e.name,value:e.id})))));return{newUserData:e,documentTypes:l,allowedRoles:b,selectedRole:s,confirm:U}}});var v=a(74260),U=a(24379),b=a(39570),q=a(24554),V=a(13747),g=a(10151),y=a(25589),h=a(68689),D=a(64689),W=a(72448),_=a(2165),Z=a(7518),k=a.n(Z);const C=(0,v.Z)(f,[["render",n]]),x=C;k()(f,"components",{QPage:U.Z,QToolbar:b.Z,QIcon:q.Z,QToolbarTitle:V.Z,QCard:g.Z,QCardSection:y.Z,QForm:h.Z,QInput:D.Z,QSelect:W.Z,QBtn:_.Z})}}]);